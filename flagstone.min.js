/*
 Copyright 2014 by CLEARWAVE DESIGNS, LLC.
 
 Licensed under the Apache License, Version 2.0
 http://www.apache.org/licenses/LICENSE-2.0
 
 Author:        Adam Carson
 Website:       http://clearwavedesigns.com
 Dependencies:  jquery.js (1.8.3+)
 
 Name(s):       FlagstoneJS (jQuery dependent)
 Slogan:        "Responsive tiling."
 Description:   Responsively tiles HTML elements left to right, top to bottom, and where there's the most room.
 */
 
 var FLAGSTONE=function(t){var s=this;this.area=t.area,this.areaWidth=this.area.outerWidth(),this.areaHeight=this.area.outerHeight(),this.minWidth=t.minWidth,this.columns=Math.floor(this.areaWidth/this.minWidth),this.margin=t.margin,this.flagstones=t.flagstones,this.flagstoneHeights=[],this.flagstoneWidth=this.areaWidth/this.columns-this.margin*(this.columns-1)/this.columns,this.init=function(){this.flagstones.each(function(){var t=$(this);t.css("width",s.flagstoneWidth+"px"),s.flagstoneHeights.push(t.outerHeight())})},this.init(),this.run=function(){for(var t=new Array(this.columns),s=0,i=this.flagstoneHeights.length;i>s;s++){if(s>=this.columns){var e=Math.min.apply(null,t),h=t.indexOf(e);this.flagstones.eq(s).css({top:e+this.margin+"px",left:(this.flagstoneWidth+this.margin)*h+"px"}),t[h]+=this.flagstoneHeights[s]+this.margin}else for(var a=0,n=this.columns;n>a;a++)this.flagstones.eq(a).css({top:"0px",left:(this.flagstoneWidth+this.margin)*a+"px"}),t[a]=this.flagstoneHeights[a];this.area.css("height",Math.max.apply(null,t)+"px")}},this.run(),this.resetDelay1,this.resetDelay2,this.reset=function(){for(s.areaWidth=s.area.outerWidth(),s.columns=Math.floor(s.areaWidth/s.minWidth),s.flagstoneWidth=s.areaWidth/s.columns-s.margin*(s.columns-1)/s.columns;s.flagstoneHeights.length>0;)s.flagstoneHeights.pop();s.flagstones.each(function(){var t=$(this);t.css("width",s.flagstoneWidth+"px"),s.flagstoneHeights.push(t.outerHeight())}),s.run()},$(window).on("resize",function(){clearTimeout(s.resetDelay1),clearTimeout(s.resetDelay2),s.resetDelay1=setTimeout(s.reset,100),s.resetDelay2=setTimeout(s.reset,1100)})};
